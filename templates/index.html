<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ç¤¾ä¼šä¿é™ºãƒ‹ãƒ¥ãƒ¼ã‚¹ - æœ€æ–°æƒ…å ±ã¾ã¨ã‚ï¼ˆã‚¹ãƒãƒ›ç‰ˆï¼‰</title>
    <meta name="description" content="ç¤¾ä¼šä¿é™ºã«é–¢ã™ã‚‹æœ€æ–°ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’è‡ªå‹•åé›†ãƒ»è¦ç´„ã—ã¦ãŠå±Šã‘ã€‚å¥åº·ä¿é™ºã€åšç”Ÿå¹´é‡‘ã€é›‡ç”¨ä¿é™ºãªã©ã®é‡è¦ãªå¤‰æ›´æƒ…å ±ã‚’ã‚¹ãƒãƒ›ã§æ‰‹è»½ã«ãƒã‚§ãƒƒã‚¯ã€‚">
    <meta name="keywords" content="ç¤¾ä¼šä¿é™º,ãƒ‹ãƒ¥ãƒ¼ã‚¹,å¥åº·ä¿é™º,åšç”Ÿå¹´é‡‘,é›‡ç”¨ä¿é™º,åŠ´ç½ä¿é™º,ä»‹è­·ä¿é™º,å¹´é‡‘,ã‚¹ãƒãƒ›">
    
    <!-- PWAå¯¾å¿œ -->
    <meta name="theme-color" content="#4A90E2">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- i-mobile/Zucksåºƒå‘Šç”¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆ -->
    <!-- å®Ÿéš›ã®åºƒå‘Šã‚³ãƒ¼ãƒ‰ã¯å–å¾—å¾Œã«æŒ¿å…¥ -->
    <script>
        // åºƒå‘ŠåˆæœŸåŒ–ç”¨ï¼ˆå®Ÿè£…æ™‚ã«æ›´æ–°ï¼‰
        window.adConfig = {
            provider: 'i-mobile', // or 'zucks'
            siteId: 'YOUR_SITE_ID',
            adUnits: {
                header: 'HEADER_AD_UNIT',
                middle: 'MIDDLE_AD_UNIT', 
                footer: 'FOOTER_AD_UNIT'
            }
        };
    </script>
    
    <style>
        :root {
            --primary: #4A90E2;
            --accent: #FF8C42;
            --bg: #F8FAFC;
            --surface: #FFFFFF;
            --text: #2D3748;
            --text-light: #718096;
            --border: #E2E8F0;
            --shadow: 0 2px 8px rgba(0,0,0,0.1);
            --radius: 8px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            font-size: 14px;
            -webkit-font-smoothing: antialiased;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ - ã‚¹ãƒãƒ›æœ€é©åŒ– */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, #2B6CB0 100%);
            color: white;
            padding: 16px 16px 20px;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow);
        }
        
        .header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 4px;
            text-align: center;
        }
        
        .header .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .last-updated {
            background: rgba(255,255,255,0.15);
            padding: 6px 12px;
            border-radius: var(--radius);
            font-size: 0.8rem;
            text-align: center;
            margin: 0 auto;
            display: inline-block;
            width: 100%;
            max-width: 200px;
        }
        
        /* åºƒå‘Šã‚¨ãƒªã‚¢ - ã‚¹ãƒãƒ›ã‚µã‚¤ã‚º */
        .ad-container {
            background: var(--surface);
            margin: 8px;
            padding: 8px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .ad-placeholder {
            color: var(--text-light);
            font-size: 0.8rem;
            padding: 20px;
            border: 2px dashed var(--border);
            border-radius: var(--radius);
            width: 100%;
        }
        
        /* çµ±è¨ˆã‚«ãƒ¼ãƒ‰ - æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ« */
        .stats-container {
            padding: 16px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        .stats-grid {
            display: flex;
            gap: 12px;
            min-width: max-content;
        }
        
        .stat-card {
            background: var(--surface);
            padding: 16px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            min-width: 100px;
            flex-shrink: 0;
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.7rem;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        /* ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚«ãƒ¼ãƒ‰ - ã‚¹ãƒãƒ›æœ€é©åŒ– */
        .news-container {
            padding: 0 16px 80px;
        }
        
        .news-card {
            background: var(--surface);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 16px;
            overflow: hidden;
        }
        
        .news-header {
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }
        
        .news-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-bottom: 8px;
        }
        
        .badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
            font-weight: 600;
            white-space: nowrap;
        }
        
        /* ã‚«ãƒ†ã‚´ãƒªã‚«ãƒ©ãƒ¼ */
        .category-å¥åº·ä¿é™º { background: #E6F7FF; color: #1890FF; }
        .category-åšç”Ÿå¹´é‡‘ { background: #F6FFED; color: #52C41A; }
        .category-é›‡ç”¨ä¿é™º { background: #FFF7E6; color: #FA8C16; }
        .category-åŠ´ç½ä¿é™º { background: #FFF1F0; color: #FF4D4F; }
        .category-ä»‹è­·ä¿é™º { background: #F9F0FF; color: #722ED1; }
        .category-ç¤¾ä¼šä¿é™ºå…¨èˆ¬ { background: #F0F0F0; color: #595959; }
        .category-ãã®ä»– { background: #F0F0F0; color: #8C8C8C; }
        
        /* é‡è¦åº¦ã‚«ãƒ©ãƒ¼ */
        .importance-é«˜ { background: #FFE7E7; color: #FF4D4F; }
        .importance-ä¸­ { background: #FFF7E6; color: #FA8C16; }
        .importance-ä½ { background: #F6FFED; color: #52C41A; }
        
        .source-tag {
            background: var(--bg);
            color: var(--text-light);
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.7rem;
        }
        
        .news-title {
            font-size: 1rem;
            font-weight: 600;
            line-height: 1.4;
            margin: 0;
        }
        
        .news-title a {
            color: var(--text);
            text-decoration: none;
            display: block;
        }
        
        .news-title a:active {
            color: var(--primary);
        }
        
        .news-body {
            padding: 12px;
        }
        
        .news-summary {
            font-size: 0.9rem;
            color: var(--text-light);
            margin-bottom: 8px;
            line-height: 1.5;
        }
        
        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 4px;
            margin-bottom: 8px;
        }
        
        .keyword-tag {
            background: var(--bg);
            color: var(--text-light);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.7rem;
            border: 1px solid var(--border);
        }
        
        .news-footer {
            padding: 12px;
            background: var(--bg);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border);
        }
        
        .read-more-btn {
            background: var(--primary);
            color: white;
            padding: 6px 12px;
            border-radius: 6px;
            text-decoration: none;
            font-size: 0.8rem;
            font-weight: 500;
            touch-action: manipulation;
        }
        
        .read-more-btn:active {
            background: #2B6CB0;
        }
        
        .published-date {
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        /* èª­ã¿è¾¼ã¿ä¸­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }
        
        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        .footer {
            background: var(--surface);
            border-top: 1px solid var(--border);
            padding: 20px 16px;
            text-align: center;
            color: var(--text-light);
            font-size: 0.8rem;
            line-height: 1.5;
        }
        
        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼éè¡¨ç¤º */
        .stats-container::-webkit-scrollbar {
            display: none;
        }
        
        /* ã‚¿ãƒƒãƒæ“ä½œæœ€é©åŒ– */
        .news-card {
            touch-action: manipulation;
        }
        
        /* å®‰å…¨ã‚¨ãƒªã‚¢å¯¾å¿œ */
        @supports (padding: max(0px)) {
            .header {
                padding-top: max(16px, env(safe-area-inset-top));
            }
            
            .news-container {
                padding-bottom: max(80px, env(safe-area-inset-bottom) + 80px);
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
        <h1>ğŸ›ï¸ ç¤¾ä¼šä¿é™ºãƒ‹ãƒ¥ãƒ¼ã‚¹</h1>
        <div class="subtitle">æ¯æœ4æ™‚ã«è‡ªå‹•æ›´æ–°ãƒ»ã‚¹ãƒãƒ›ç‰¹åŒ–ç‰ˆ</div>
        <div class="last-updated">
            æœ€çµ‚æ›´æ–°: {{ last_updated }}
        </div>
    </header>
    
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼åºƒå‘Š -->
    <div class="ad-container">
        <div class="ad-placeholder" id="header-ad">
            <!-- i-mobile/Zucksåºƒå‘Šã‚¨ãƒªã‚¢ -->
            ãƒ˜ãƒƒãƒ€ãƒ¼åºƒå‘Šã‚¨ãƒªã‚¢<br>
            <small>320x50 ãƒãƒŠãƒ¼æ¨å¥¨</small>
        </div>
    </div>
    
    <!-- çµ±è¨ˆæƒ…å ± -->
    <section class="stats-container">
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">{{ total_count }}</div>
                <div class="stat-label">ç·ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ high_importance }}</div>
                <div class="stat-label">é‡è¦ãƒ‹ãƒ¥ãƒ¼ã‚¹</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ category_count }}</div>
                <div class="stat-label">ã‚«ãƒ†ã‚´ãƒª</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">{{ today_count }}</div>
                <div class="stat-label">æœ¬æ—¥æ›´æ–°</div>
            </div>
        </div>
    </section>
    
    <!-- ãƒ‹ãƒ¥ãƒ¼ã‚¹ä¸€è¦§ -->
    <main class="news-container">
        {% for item in news %}
        <article class="news-card">
            <header class="news-header">
                <div class="news-meta">
                    <span class="badge category-{{ item.category }}">
                        {% if item.category == 'å¥åº·ä¿é™º' %}ğŸ¥
                        {% elif item.category == 'åšç”Ÿå¹´é‡‘' %}ğŸ’°
                        {% elif item.category == 'é›‡ç”¨ä¿é™º' %}ğŸ’¼
                        {% elif item.category == 'åŠ´ç½ä¿é™º' %}ğŸš¨
                        {% elif item.category == 'ä»‹è­·ä¿é™º' %}ğŸ¤
                        {% elif item.category == 'ç¤¾ä¼šä¿é™ºå…¨èˆ¬' %}ğŸ“‹
                        {% else %}ğŸ“„
                        {% endif %}
                        {{ item.category }}
                    </span>
                    
                    <span class="badge importance-{{ item.importance }}">
                        {% if item.importance == 'é«˜' %}ğŸš¨
                        {% elif item.importance == 'ä¸­' %}âš ï¸
                        {% else %}â„¹ï¸
                        {% endif %}
                        {{ item.importance }}
                    </span>
                    
                    <span class="source-tag">{{ item.source }}</span>
                </div>
                
                <h2 class="news-title">
                    <a href="{{ item.url }}" target="_blank" rel="noopener">
                        {{ item.title[:80] }}{% if item.title|length > 80 %}...{% endif %}
                    </a>
                </h2>
            </header>
            
            <div class="news-body">
                <p class="news-summary">
                    {{ item.summary[:100] }}{% if item.summary|length > 100 %}...{% endif %}
                </p>
                
                {% if item.keywords %}
                <div class="keywords">
                    {% for keyword in item.keywords[:4] %}
                    <span class="keyword-tag">{{ keyword }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            
            <footer class="news-footer">
                <span class="published-date">
                    {% if item.published_date %}{{ item.published_date }}{% else %}æ—¥ä»˜ä¸æ˜{% endif %}
                </span>
                <a href="{{ item.url }}" target="_blank" rel="noopener" class="read-more-btn">
                    å…ƒè¨˜äº‹
                </a>
            </footer>
        </article>
        
        <!-- ä¸­é–“åºƒå‘Šï¼ˆ5ä»¶ã”ã¨ï¼‰ -->
        {% if loop.index % 5 == 0 %}
        <div class="ad-container">
            <div class="ad-placeholder" id="middle-ad-{{ loop.index }}">
                ä¸­é–“åºƒå‘Šã‚¨ãƒªã‚¢ {{ loop.index // 5 }}<br>
                <small>320x100 ãƒ¬ã‚¯ã‚¿ãƒ³ã‚°ãƒ«æ¨å¥¨</small>
            </div>
        </div>
        {% endif %}
        {% endfor %}
        
        {% if not news %}
        <div class="loading">
            <div class="spinner"></div>
            <span style="margin-left: 8px;">ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚’èª­ã¿è¾¼ã¿ä¸­...</span>
        </div>
        {% endif %}
    </main>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼åºƒå‘Š -->
    <div class="ad-container">
        <div class="ad-placeholder" id="footer-ad">
            ãƒ•ãƒƒã‚¿ãƒ¼åºƒå‘Šã‚¨ãƒªã‚¢<br>
            <small>320x50 ãƒãƒŠãƒ¼æ¨å¥¨</small>
        </div>
    </div>
    
    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="footer">
        <p>&copy; 2025 ç¤¾ä¼šä¿é™ºãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ»ã‚¹ãƒãƒ›ç‰ˆ</p>
        <p>ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹: åšç”ŸåŠ´åƒçœãƒ»æ—¥æœ¬å¹´é‡‘æ©Ÿæ§‹ãƒ»Yahoo!ãƒ‹ãƒ¥ãƒ¼ã‚¹</p>
        <p style="margin-top: 8px;">
            ã“ã®ã‚µã‚¤ãƒˆã¯å…¬çš„æ©Ÿé–¢ãƒ»ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚µã‚¤ãƒˆã®ç™ºè¡¨æƒ…å ±ã‚’<br>
            è‡ªå‹•åé›†ãƒ»è¦ç´„ã—ãŸã‚‚ã®ã§ã™ã€‚è©³ç´°ã¯å…ƒè¨˜äº‹ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
        </p>
    </footer>
    
    <!-- JavaScript -->
    <script>
        // ã‚¿ãƒƒãƒæ“ä½œã®æœ€é©åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ã‚¹ãƒ ãƒ¼ã‚ºã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            const cards = document.querySelectorAll('.news-card');
            cards.forEach(card => {
                card.addEventListener('touchstart', function() {
                    this.style.transform = 'scale(0.98)';
                });
                card.addEventListener('touchend', function() {
                    this.style.transform = 'scale(1)';
                });
            });
            
            // æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã®ãƒ’ãƒ³ãƒˆ
            const statsContainer = document.querySelector('.stats-container');
            let isScrolled = false;
            
            statsContainer.addEventListener('scroll', function() {
                if (!isScrolled) {
                    isScrolled = true;
                    // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã•ã‚ŒãŸã“ã¨ã‚’è¨˜éŒ²
                }
            });
            
            // åºƒå‘Šã®é…å»¶èª­ã¿è¾¼ã¿
            setTimeout(loadAds, 1000);
        });
        
        function loadAds() {
            // å®Ÿéš›ã®åºƒå‘Šå®Ÿè£…æ™‚ã«ã“ã“ã‚’æ›´æ–°
            // i-mobile ã¾ãŸã¯ Zucks ã®åºƒå‘Šã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
            console.log('åºƒå‘Šèª­ã¿è¾¼ã¿æº–å‚™å®Œäº†');
            
            // ä¾‹: i-mobileåºƒå‘Šã®å®Ÿè£…
            // if (window.adConfig.provider === 'i-mobile') {
            //     // i-mobileåºƒå‘Šã‚³ãƒ¼ãƒ‰
            // }
        }
        
        // PWAå¯¾å¿œ - Service Workerç™»éŒ²
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('/sw.js')
                    .then(function(registration) {
                        console.log('SW registered: ', registration);
                    })
                    .catch(function(registrationError) {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>